---
- name: Install python on hosts
  hosts: rancher
  remote_user: root
  # remote_user: user
  # become: yes
  # become_method: sudo
  gather_facts: False

  tasks:
  - name: Install python on host
    raw: test -e /usr/bin/python3 || (apt -y update && apt install -y python3)
    register: output
    changed_when: output.stdout != ""

- name: Create a secure install then setup docker
  hosts: rancher
  remote_user: root
  # remote_user: user
  # become: yes
  # become_method: sudo

  roles:
  - common
  - networking
  - ufw
  - docker
  - rancher
